<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Promises in JavaScript - Coding N Concepts</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="Promises using fetch API in JavaScript">
	<meta property="og:title" content="Promises in JavaScript" />
<meta property="og:description" content="Promises using fetch API in JavaScript" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://codingnconcepts.com/javascript/promises-in-javascript/" />
<meta property="article:published_time" content="2020-04-03T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-04-03T00:00:00+00:00" />
<meta property="og:site_name" content="CodingNConcepts" />

<meta property="article:author" content="https://www.facebook.com/codingnconcepts" />
<meta property="article:publisher" content="https://www.facebook.com/codingnconcepts" />
<meta property="article:section" content="javascript" />
<meta property="article:tag" content="Interview" />
<meta property="article:tag" content="Javascript" />
<meta property="article:tag" content="JS" />
<meta property="article:tag" content="ES6" />
<meta property="fb:admins" content="177784346770196" />
	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Promises in JavaScript"/>
<meta name="twitter:description" content="Promises using fetch API in JavaScript"/>

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="canonical" href="https://codingnconcepts.com/javascript/promises-in-javascript/">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-160024498-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	


<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "articleSection": "javascript",
    "name": "Promises in JavaScript",
    "headline": "Promises in JavaScript",
    "alternativeHeadline": "",
    "description": "Promises using fetch API in JavaScript",
    "inLanguage": "en-us",
	"isFamilyFriendly": "true",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/codingnconcepts.com\/javascript\/promises-in-javascript\/"
    },
    "author" : {
        "@type": "Person",
        "name": "Ashish Lahoti"
    },
    "creator" : {
        "@type": "Person",
        "name": "Ashish Lahoti"
    },
    "accountablePerson" : {
        "@type": "Person",
        "name": "Ashish Lahoti"
    },
    "copyrightHolder" : "Coding N Concepts",
    "copyrightYear" : "2020",
    "dateCreated": "2020-04-03T00:00:00.00Z",
    "datePublished": "2020-04-03T00:00:00.00Z",
    "dateModified": "2020-04-03T00:00:00.00Z",
    "publisher":{
        "@type":"Organization",
        "name": "Coding N Concepts",
        "url": "https://codingnconcepts.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "https:\/\/codingnconcepts.com\/favicon-32x32.png",
            "width":"32",
            "height":"32"
        }
    },
    "image": "https://codingnconcepts.com/favicon-32x32.png",
    "url" : "https:\/\/codingnconcepts.com\/javascript\/promises-in-javascript\/",
    "wordCount" : "1688",
    "genre" : [ "Interview" , "Javascript" , "JS" , "ES6" ],
    "keywords" : [ ]
}
</script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/" title="Coding N Concepts" rel="home">
				<div class="logo__title"><img src="/favicon-32x32.png" alt="Promises in JavaScript"> Coding N Concepts</div>
				<div class="logo__tagline">Ashish Lahoti&#39;s Technical Blog</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">Home</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/java/">
				
				<span class="menu__text">Java</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/javascript/">
				
				<span class="menu__text">JavaScript</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/spring-boot/">
				
				<span class="menu__text">Spring Boot</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/interview-questions/">
				
				<span class="menu__text">Interview Questions</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/categories/kafka/">
				
				<span class="menu__text">Kafka</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/puzzle/">
				
				<span class="menu__text">Puzzles</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/tools/">
				
				<span class="menu__text">Tools</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">About Me</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title"><img class="post__thumbnail" src="/img/logo/js.png" alt="Promises in JavaScript"> Promises in JavaScript</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
	<time class="meta__text" datetime="2020-04-03T00:00:00Z">April 03, 2020</time>
</div>

<div class="meta__item-categories meta__item">
	<svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg>
	<span class="meta__text"><a class="meta__link" href="/categories/javascript/" rel="category">Javascript</a>
	</span>
</div></div>
		</header><div class="content post__content clearfix">
			<p>Promises are introduced natively in ES6. They are very similar to our promises. As we keep or break our promises, Javascript promises are also either resolve or reject. In this post we will talk about why we should use promises, promise syntax, promise states and its practical usage with examples using fetch API.</p>
<h2 id="why-promises">Why Promises?</h2>
<p>In earlier days, you would have used <strong>callbacks</strong> to handle asynchronous operations. However, callbacks have limited functionality and often leads to unmanageable code if you are handling multiple async calls, it leads to heavily nested callback code which is also known as <strong>callback hell</strong>.</p>
<p>Promises were introduced to improve code readability and better handling of async calls and errors.</p>
<h2 id="promise-syntax">Promise Syntax</h2>
<p>Let&rsquo;s look at the syntax of simple promise object.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">promise</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Promise(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span>) {
  <span style="color:#75715e">// asynchronous call
</span><span style="color:#75715e"></span>});
</code></pre></div><p>Promise takes a callback function as an argument and that callback function takes two arguments â€” the first is a <strong>resolve</strong> function, and the second one is a <strong>reject</strong> function. A promise can either be <em>fulfilled</em> with a value or <em>rejected</em> with a reason (error).</p>
<h2 id="promise-states">Promise States</h2>
<p>A promise object has one of three states:</p>
<ul>
<li><strong>pending:</strong> is the initial state.</li>
<li><strong>fulfilled:</strong> is success state. resolve() method is called.</li>
<li><strong>rejected:</strong> is failed state, reject() is called.</li>
</ul>
<figure class="center">
    <img src="/img/javascript/promise-states.svg"/> 
</figure>

<h2 id="usage">Usage</h2>
<p>We generally use async calls using fetch API to get data from the <em>HTTP</em> endpoints. Let&rsquo;s look at the example, how promises can be used in such case.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">//create a promise object
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getUsers</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Promise(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span> ){
    <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/users&#39;</span>)
    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">response</span> =&gt; {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
    })
    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">data</span> =&gt; {
        <span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">data</span>);
    })
    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
        <span style="color:#a6e22e">reject</span>(<span style="color:#a6e22e">error</span>);
    });
});

<span style="color:#75715e">//call promise object
</span><span style="color:#75715e"></span><span style="color:#a6e22e">getUsers</span>
.<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">data</span>) =&gt; {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">data</span>);
})
.<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">error</span>);
});
</code></pre></div><h2 id="chained-promises">Chained Promises</h2>
<p>Promise chaining comes into play when you have to use output of one async call as input of another async call. You can chain multiple promises in this case.</p>
<p>Letâ€™s look at the below example where we first fetch users list using <code>getUser</code> async call then chain it with <code>getPosts</code> by passing userId.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">//create a common getData function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getData</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">url</span>) =&gt; <span style="color:#66d9ef">new</span> Promise(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span> ){
  <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>)
    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">response</span> =&gt; {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
    })
    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">data</span> =&gt; {
        <span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">data</span>);
    })
    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
        <span style="color:#a6e22e">reject</span>(<span style="color:#a6e22e">error</span>);
    });
});

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getUsers</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getData</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/users&#39;</span>);
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getPosts</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">userId</span>) =&gt; <span style="color:#a6e22e">getData</span>(<span style="color:#e6db74">`https://jsonplaceholder.typicode.com/posts?userId=</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">userId</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);

<span style="color:#75715e">//chained promises to fetch all posts by first user (userId = 1)
</span><span style="color:#75715e"></span><span style="color:#a6e22e">getUsers</span>.<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">data</span>) =&gt; {
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>[<span style="color:#ae81ff">0</span>];
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">getPosts</span>(<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">id</span>);
})
.<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">data</span>) =&gt; {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">data</span>);
})
.<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">error</span>);
});
</code></pre></div><pre><code><div class="code_output">Output</div>
â–¼ (10) [{â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}]
  âž¤ 0: {userId: 1, id: 1, title: &quot;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&quot;, body: &quot;quia et suscipitâ†µsuscipit recusandae consequuntur â€¦strum rerum est autem sunt rem eveniet architecto&quot;}
  âž¤ 1: {userId: 1, id: 2, title: &quot;qui est esse&quot;, body: &quot;est rerum tempore vitaeâ†µsequi sint nihil reprehendâ€¦aperiam non debitis possimus qui neque nisi nulla&quot;}
  âž¤ 2: {userId: 1, id: 3, title: &quot;ea molestias quasi exercitationem repellat qui ipsa sit aut&quot;, body: &quot;et iusto sed quo iureâ†µvoluptatem occaecati omnis eâ€¦â†µmolestiae porro eius odio et labore et velit aut&quot;}
  âž¤ 3: {userId: 1, id: 4, title: &quot;eum et est occaecati&quot;, body: &quot;ullam et saepe reiciendis voluptatem adipisciâ†µsit â€¦ ipsam iureâ†µquis sunt voluptatem rerum illo velit&quot;}
  âž¤ 4: {userId: 1, id: 5, title: &quot;nesciunt quas odio&quot;, body: &quot;repudiandae veniam quaerat sunt sedâ†µalias aut fugiâ€¦sse voluptatibus quisâ†µest aut tenetur dolor neque&quot;}
  âž¤ 5: {userId: 1, id: 6, title: &quot;dolorem eum magni eos aperiam quia&quot;, body: &quot;ut aspernatur corporis harum nihil quis provident â€¦sâ†µvoluptate dolores velit et doloremque molestiae&quot;}
  âž¤ 6: {userId: 1, id: 7, title: &quot;magnam facilis autem&quot;, body: &quot;dolore placeat quibusdam ea quo vitaeâ†µmagni quis eâ€¦t excepturi ut quiaâ†µsunt ut sequi eos ea sed quas&quot;}
  âž¤ 7: {userId: 1, id: 8, title: &quot;dolorem dolore est ipsam&quot;, body: &quot;dignissimos aperiam dolorem qui eumâ†µfacilis quibusâ€¦â†µipsam ut commodi dolor voluptatum modi aut vitae&quot;}
  âž¤ 8: {userId: 1, id: 9, title: &quot;nesciunt iure omnis dolorem tempora et accusantium&quot;, body: &quot;consectetur animi nesciunt iure doloreâ†µenim quia aâ€¦st aut quod aut provident voluptas autem voluptas&quot;}
  âž¤ 9: {userId: 1, id: 10, title: &quot;optio molestias id quia eum&quot;, body: &quot;quo et expedita modi cum officia vel magniâ†µdoloribâ€¦itâ†µquos veniam quod sed accusamus veritatis error&quot;}
    length: 10
  âž¤ __proto__: Array(0)

</code></pre><h2 id="promiseall">Promise.all()</h2>
<p>Promise.all() is useful when you want to execute multiple async calls and wait for all of them to finish and get collective output.</p>
<p>Promise.all() takes an array of promises and return an array of the results in the same sequence of promises. It throws an exception if any one of the async call fails.</p>
<p>Letâ€™s look at the below example, where we fetch the result of three async calls <code>getUsers</code>, <code>getPosts</code> and <code>getComments</code> all together.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">//create a common getData function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getData</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">url</span>) =&gt; <span style="color:#66d9ef">new</span> Promise(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span> ){
  <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>)
    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">response</span> =&gt; {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
    })
    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">data</span> =&gt; {
        <span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">data</span>);
    })
    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
        <span style="color:#a6e22e">reject</span>(<span style="color:#a6e22e">error</span>);
    });
});

<span style="color:#75715e">//create multiple promises from common getData function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getUsers</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getData</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/users&#39;</span>);
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getPosts</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getData</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/posts&#39;</span>);
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getComments</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getData</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/comments&#39;</span>);

<span style="color:#75715e">//fetch data to get users, posts and comments collectively
</span><span style="color:#75715e"></span>Promise.<span style="color:#a6e22e">all</span>([<span style="color:#a6e22e">getUsers</span>, <span style="color:#a6e22e">getPosts</span>, <span style="color:#a6e22e">getComments</span>]).<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">result</span> =&gt; {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">result</span>);
});
</code></pre></div><pre><code><div class="code_output">Output</div>
â–¼ (3) [Array(10), Array(100), Array(500)]
  âž¤ 0: (10) [{â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}]
  âž¤ 1: (100) [{â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}]
  âž¤ 2: (500) [{â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, â€¦]
    length: 3
  âž¤ __proto__: Array(0)
</code></pre><h2 id="promiseallsettled">Promise.allSettled()</h2>
<p>Promise.allSettled() is similar to Promise.all() to execute multiple async calls. The only difference between these two,</p>
<ul>
<li>Promise.all() is either all resolve or any reject, means if any async call fails, it returns an error.</li>
<li>Promise.allSettled() is all settle, means it doesn&rsquo;t return error if any async call fails. It gives the collective output of all successful and failed async calls.</li>
</ul>
<p>Let&rsquo;s look at the below example, where <code>getPostsFails</code> aync call returns 404 error since url endpoint doesn&rsquo;t exist but you still able to fetch data for <code>getUsers</code> and <code>getComments</code> async calls.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">//create a common getData function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getData</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">url</span>) =&gt; <span style="color:#66d9ef">new</span> Promise(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span> ){
  <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>)
    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">response</span> =&gt; {
        <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>){
          <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
        }<span style="color:#66d9ef">else</span>{
          <span style="color:#66d9ef">throw</span> <span style="color:#e6db74">`Error </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">status</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
        }     
    })
    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">data</span> =&gt; {
        <span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">data</span>);
    })
    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
        <span style="color:#a6e22e">reject</span>(<span style="color:#a6e22e">error</span>);
    });
});

<span style="color:#75715e">//create multiple promises from common getData function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getUsers</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getData</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/users&#39;</span>);
<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getPostsFails</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getData</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/postsfailes&#39;</span>);
</span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getComments</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getData</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/comments&#39;</span>);

<span style="color:#75715e">//fetch data to get users, posts and comments collectively regardless of any error
</span><span style="color:#75715e"></span>Promise.<span style="color:#a6e22e">allSettled</span>([<span style="color:#a6e22e">getUsers</span>, <span style="color:#a6e22e">getPostsFails</span>, <span style="color:#a6e22e">getComments</span>]).<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">result</span> =&gt; {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">result</span>);
});
</code></pre></div><pre><code><div class="code_output">Output</div>
â–¼ (3) [{â€¦}, {â€¦}, {â€¦}]
  âž¤ 0: {status: &quot;fulfilled&quot;, value: Array(10)}
  <mark>âž¤ 1: {status: &#34;rejected&#34;, reason: &#34;Error 404&#34;}</mark>
  âž¤ 2: {status: &quot;fulfilled&quot;, value: Array(500)}
    length: 3
  âž¤ __proto__: Array(0)
</code></pre><h2 id="promiserace">Promise.race()</h2>
<p>Promise.race() is useful when you are interested in fetching data from any one of the async call out of multiple async calls, whichever resolve first.</p>
<p>Look at the below example where we are interested in any data out of <code>getTodos</code>, <code>getUsers</code> and <code>getComments</code>, whichever resolves first. In our case <code>getUsers</code> resolved first and returned user list.</p>
<p>Please note that if you execute the same code snippet again and again, result might differ based on network connectivity and which one resolve first.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">//create a common getData function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getData</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">url</span>) =&gt; <span style="color:#66d9ef">new</span> Promise(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span> ){
  <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>)
    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">response</span> =&gt; {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
    })
    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">data</span> =&gt; {
        <span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">data</span>);
    })
    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
        <span style="color:#a6e22e">reject</span>(<span style="color:#a6e22e">error</span>);
    });
});

<span style="color:#75715e">//create multiple promises from common getData function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getTodos</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getData</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/todos&#39;</span>);
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getUsers</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getData</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/users&#39;</span>);
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getComments</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getData</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/comments&#39;</span>);


<span style="color:#75715e">//fetch either todos or users or comments whichever resolves first
</span><span style="color:#75715e"></span>Promise.<span style="color:#a6e22e">race</span>([<span style="color:#a6e22e">getTodos</span>, <span style="color:#a6e22e">getUsers</span>, <span style="color:#a6e22e">getComments</span>]).<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">result</span> =&gt; {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">result</span>);
});
</code></pre></div><pre><code><div class="code_output">Output</div>
â–¼ (10) [{â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}]
  âž¤ 0: {id: 1, name: &quot;Leanne Graham&quot;, username: &quot;Bret&quot;, email: &quot;Sincere@april.biz&quot;, address: {â€¦}, â€¦}
  âž¤ 1: {id: 2, name: &quot;Ervin Howell&quot;, username: &quot;Antonette&quot;, email: &quot;Shanna@melissa.tv&quot;, address: {â€¦}, â€¦}
  âž¤ 2: {id: 3, name: &quot;Clementine Bauch&quot;, username: &quot;Samantha&quot;, email: &quot;Nathan@yesenia.net&quot;, address: {â€¦}, â€¦}
  âž¤ 3: {id: 4, name: &quot;Patricia Lebsack&quot;, username: &quot;Karianne&quot;, email: &quot;Julianne.OConner@kory.org&quot;, address: {â€¦}, â€¦}
  âž¤ 4: {id: 5, name: &quot;Chelsey Dietrich&quot;, username: &quot;Kamren&quot;, email: &quot;Lucio_Hettinger@annie.ca&quot;, address: {â€¦}, â€¦}
  âž¤ 5: {id: 6, name: &quot;Mrs. Dennis Schulist&quot;, username: &quot;Leopoldo_Corkery&quot;, email: &quot;Karley_Dach@jasper.info&quot;, address: {â€¦}, â€¦}
  âž¤ 6: {id: 7, name: &quot;Kurtis Weissnat&quot;, username: &quot;Elwyn.Skiles&quot;, email: &quot;Telly.Hoeger@billy.biz&quot;, address: {â€¦}, â€¦}
  âž¤ 7: {id: 8, name: &quot;Nicholas Runolfsdottir V&quot;, username: &quot;Maxime_Nienow&quot;, email: &quot;Sherwood@rosamond.me&quot;, address: {â€¦}, â€¦}
  âž¤ 8: {id: 9, name: &quot;Glenna Reichert&quot;, username: &quot;Delphine&quot;, email: &quot;Chaim_McDermott@dana.io&quot;, address: {â€¦}, â€¦}
  âž¤ 9: {id: 10, name: &quot;Clementina DuBuque&quot;, username: &quot;Moriah.Stanton&quot;, email: &quot;Rey.Padberg@karina.biz&quot;, address: {â€¦}, â€¦}
    length: 10
  âž¤ __proto__: Array(0)
</code></pre><h2 id="summary">Summary</h2>
<p>It is always better to use Promises over callback functions as Promises has a lot to offer in terms of,</p>
<ul>
<li>Resolve a successful anyc call response using <code>Promise.resolve(response)</code></li>
<li>Reject async call response based on status or data using <code>Promise.reject(response)</code></li>
<li>Better error handling using <code>Promise.catch(onRejection)</code></li>
<li>Chaining of multiple async calls using <code>Promise.then(onFulfillment, onRejection)</code></li>
<li>Get collective result of multiple async calls using <code>Promise.all([promise1, promise2, ...])</code></li>
<li>Get collective result of multiple async calls regardless of any error using <code>Promise.allSettled([promise1, promise2, ...])</code></li>
<li>Get any one result whichever resolves first out of many async calls using <code>Promise.race([promise1, promise2, ...])</code></li>
</ul>
		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/tags/interview/" rel="tag">Interview</a></li>
		<li class="tags__item"><a class="tags__link btn" href="/tags/javascript/" rel="tag">Javascript</a></li>
		<li class="tags__item"><a class="tags__link btn" href="/tags/js/" rel="tag">JS</a></li>
		<li class="tags__item"><a class="tags__link btn" href="/tags/es6/" rel="tag">ES6</a></li>
	</ul>
</div>
		</footer>
	</article>
</main>

  
  
  

  <section class="social-share">
    <ul class="share-icons">
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?hashtags=codingnconcepts&amp;url=https%3a%2f%2fcodingnconcepts.com%2fjavascript%2fpromises-in-javascript%2f&amp;text=Promises%20in%20JavaScript" target="_blank" rel="noopener" aria-label="Share on Twitter" class="share-btn twitter">
          <svg class="widget-social__link-icon icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5 0-78.8 35.3-78.8 78.8 0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3-6.7 11.6-10.6 25.2-10.6 39.6 0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1 0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4 0-12.6-.4-18.8-1.1 34.9 22.4 76.3 35.4 120.8 35.4 144.9 0 224.1-120 224.1-224.1 0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg>
          <p>Twitter</p>
          </a>
      </li>
      

      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fcodingnconcepts.com%2fjavascript%2fpromises-in-javascript%2f" target="_blank" rel="noopener" aria-label="Share on Facebook" class="share-btn facebook">
          <svg class="widget-social__link-icon icon icon-facebook" width="24" height="24" viewBox="0 0 352 352"><path d="m0 32v288c0 17.5 14.5 32 32 32h288c17.5 0 32-14.5 32-32v-288c0-17.5-14.5-32-32-32h-288c-17.5 0-32 14.5-32 32zm320 0v288h-83v-108h41.5l6-48h-47.5v-31c0-14 3.5-23.5 23.5-23.5h26v-43.5c-4.4-.6-19.8-1.5-37.5-1.5-36.9 0-62 22.2-62 63.5v36h-42v48h42v108h-155v-288z"/></svg>
          <p>Facebook</p>
          </a>
      </li>
      

      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fcodingnconcepts.com%2fjavascript%2fpromises-in-javascript%2f&amp;source=https%3a%2f%2fcodingnconcepts.com%2fjavascript%2fpromises-in-javascript%2f&amp;title=Promises%20in%20JavaScript&amp;summary=Promises%20in%20JavaScript" target="_blank" rel="noopener" aria-label="Share on LinkedIn" class="share-btn linkedin">
          <svg class="widget-social__link-icon icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352"><path d="M0,40v272c0,21.9,18.1,40,40,40h272c21.9,0,40-18.1,40-40V40c0-21.9-18.1-40-40-40H40C18.1,0,0,18.1,0,40z M312,32 c4.6,0,8,3.4,8,8v272c0,4.6-3.4,8-8,8H40c-4.6,0-8-3.4-8-8V40c0-4.6,3.4-8,8-8H312z M59.5,87c0,15.2,12.3,27.5,27.5,27.5 c15.2,0,27.5-12.3,27.5-27.5c0-15.2-12.3-27.5-27.5-27.5C71.8,59.5,59.5,71.8,59.5,87z M187,157h-1v-21h-45v152h47v-75 c0-19.8,3.9-39,28.5-39c24.2,0,24.5,22.4,24.5,40v74h47v-83.5c0-40.9-8.7-72-56.5-72C208.5,132.5,193.3,145.1,187,157z M64,288h47.5 V136H64V288z"/></svg>
            <p>LinkedIn</p>
          </a>
      </li>
      

      
      
      <li>
        <a href="whatsapp://send?text=Promises%20in%20JavaScript%2c%20by%20Coding%20N%20Concepts%0aPromises%20using%20fetch%20API%20in%20JavaScript%0a%0ahttps%3a%2f%2fcodingnconcepts.com%2fjavascript%2fpromises-in-javascript%2f%0a" target="_blank" class="share-btn whatsapp">
          <svg class="widget-social__link-icon icon icon-whatsapp" width="24" height="24" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3 0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7 0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1 0-5.2 4.2-9.4 9.4-9.4 2.5 0 4.9 1 6.7 2.8 1.8 1.8 2.8 4.2 2.8 6.7-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2-.2-.3 0-.5.1-.6s.3-.3.4-.5c.2-.1.3-.3.4-.5.1-.2 0-.4 0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg>
          <p>Email</p>
        </a>
      </li>
      

      
      
      <li>
        <a href="mailto:?subject=Coding%20N%20Concepts - Promises%20in%20JavaScript.&amp;body=Promises%20in%20JavaScript%2c%20by%20Coding%20N%20Concepts%0aPromises%20using%20fetch%20API%20in%20JavaScript%0a%0ahttps%3a%2f%2fcodingnconcepts.com%2fjavascript%2fpromises-in-javascript%2f%0a" target="_blank" class="share-btn email">
          <svg class="widget-social__link-icon icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16-256-16h-16-384-16zm347 16-139 92.5-139-92.5zm-148 125.5 9 5.5 9-5.5 167-111.5v210h-352v-210z"/></svg>
          <p>Email</p>
        </a>
      </li>
    </ul>
  </section>
  



<div class="related_post_section">
    <h2 class = "related_post_title">See Also</h2>
    <ul class = "related_post">
        
        <li><a href="/javascript/lexical-scope-closures-and-currying/">Lexical Scope, Closures and Currying in JavaScript</a></li>
        
        <li><a href="/javascript/const-vs-object-freeze/">Difference in const and Object.freeze() in JavaScript</a></li>
        
        <li><a href="/javascript/object-methods-in-javascript/">Object methods in JavaScript</a></li>
        
        <li><a href="/javascript/difference-between-var-let-and-const/">Difference between var, let and const</a></li>
        
        <li><a href="/tricky-javascript-interview-questions/">Tricky Javascript Interview Questions</a></li>
        
    </ul>
</div>


<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="Ashish Lahoti avatar" src="/img/avatar.png" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">About Ashish Lahoti</span>
	</div>
	<div class="authorbox__description">
		Ashish Lahoti is a full stack application developer at DBS Bank | Confluent Certified Developer for Apache KAFKA | SCJP Certified
	</div>
</div>

<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/javascript/comparison-operators-in-javascript/" rel="prev"><span class="post-nav__caption">Â«&thinsp;Previous</span><p class="post-nav__post-title">Difference in == and === comparison operators in JavaScript</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="/javascript/async-await-in-javascript/" rel="next"><span class="post-nav__caption">Next&thinsp;Â»</span><p class="post-nav__post-title">Async/Await in JavaScript</p></a>
	</div>
</nav>

<section class="comments">
	<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "codingnconcepts" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 CodingNConcepts.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>