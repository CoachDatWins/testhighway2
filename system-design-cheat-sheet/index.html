<!doctype html><html class=no-js lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>System Design Cheat Sheet - Coding N Concepts</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="System Design Cheat Sheet for Interview Preparation"><meta property="og:title" content="System Design Cheat Sheet"><meta property="og:description" content="System Design Cheat Sheet for Interview Preparation"><meta property="og:type" content="article"><meta property="og:url" content="https://codingnconcepts.com/system-design-cheat-sheet/"><meta property="og:image" content="https://codingnconcepts.com/img/logo/interview.jpg"><meta property="article:published_time" content="2020-10-05T00:00:00+00:00"><meta property="article:modified_time" content="2020-11-08T00:00:00+00:00"><meta property="og:site_name" content="CodingNConcepts"><meta property="article:author" content="https://www.facebook.com/codingnconcepts"><meta property="article:publisher" content="https://www.facebook.com/codingnconcepts"><meta property="article:section" content="interview-questions"><meta property="article:tag" content="System Design"><meta property="fb:admins" content="177784346770196"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://codingnconcepts.com/img/logo/interview.jpg"><meta name=twitter:title content="System Design Cheat Sheet"><meta name=twitter:description content="System Design Cheat Sheet for Interview Preparation"><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700|Rowdies"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico><link rel=canonical href=https://codingnconcepts.com/system-design-cheat-sheet/><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-160024498-1')</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-160024498-1"></script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"interview-questions","name":"System Design Cheat Sheet","headline":"System Design Cheat Sheet","alternativeHeadline":null,"description":"System Design Cheat Sheet for Interview Preparation","inLanguage":"en-us","isFamilyFriendly":true,"mainEntityOfPage":{"@type":"WebPage","@id":"https://codingnconcepts.com/system-design-cheat-sheet/"},"author":{"@type":"Person","name":"Ashish Lahoti"},"creator":{"@type":"Person","name":"Ashish Lahoti"},"accountablePerson":{"@type":"Person","name":"Ashish Lahoti"},"copyrightHolder":"Coding N Concepts","copyrightYear":"2020","dateCreated":"2020-10-05T00:00:00.00Z","datePublished":"2020-10-05T00:00:00.00Z","dateModified":"2020-11-08T00:00:00.00Z","publisher":{"@type":"Organization","name":"Coding N Concepts","url":"https://codingnconcepts.com/","logo":{"@type":"ImageObject","url":"https://codingnconcepts.com/logo-amp.png","width":600,"height":60}},"image":["https://codingnconcepts.com/img/logo/interview.jpg"],"url":"https://codingnconcepts.com/system-design-cheat-sheet/","wordCount":2075,"genre":["System Design"],"keywords":null}</script></head><body class=body><div class="container container--outer"><header class=header><div class=container><div class=logo><a class=logo__link href=/ title="Coding N Concepts" rel=home><div class=logo__title><img src=/favicon-32x32.png alt="System Design Cheat Sheet"> Coding N Concepts</div><div class=logo__tagline>Ashish Lahoti's Technical Blog</div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/tags/popular-posts><span class=menu__text>Popular</span></a></li><li class="menu__item menu__dropdown"><a class=menu__link href=/java/><span class=menu__text>Java</span>
<label class=drop-icon for=Java>▾</label></a>
<input type=checkbox id=Java><ul class=submenu__list><li class=menu__item><a class=menu__link href=/tags/java-core/><span class=menu__text>Core Java</span></a></li><li class=menu__item><a class=menu__link href=/tags/java-collection/><span class=menu__text>Collections</span></a></li><li class=menu__item><a class=menu__link href=/tags/java-design-pattern/><span class=menu__text>Design Patterns</span></a></li><li class=menu__item><a class=menu__link href=/tags/java-recursive/><span class=menu__text>Recursive</span></a></li><li class=menu__item><a class=menu__link href=/tags/java-streams/><span class=menu__text>Streams</span></a></li><li class=menu__item><a class=menu__link href=/tags/java-string/><span class=menu__text>String</span></a></li><li class=menu__item><a class=menu__link href=/tags/java-numbers/><span class=menu__text>Numbers</span></a></li><li class=menu__item><a class=menu__link href=/tags/java-threads/><span class=menu__text>Threads</span></a></li></ul></li><li class="menu__item menu__dropdown"><a class=menu__link href=/javascript/><span class=menu__text>JavaScript</span>
<label class=drop-icon for=JavaScript>▾</label></a>
<input type=checkbox id=JavaScript><ul class=submenu__list><li class=menu__item><a class=menu__link href=/tags/javascript-core/><span class=menu__text>JS Core</span></a></li><li class=menu__item><a class=menu__link href=/tags/javascript-object/><span class=menu__text>JS Object</span></a></li><li class=menu__item><a class=menu__link href=/tags/javascript-string/><span class=menu__text>JS String</span></a></li><li class=menu__item><a class=menu__link href=/tags/javascript-array/><span class=menu__text>JS Array</span></a></li><li class=menu__item><a class=menu__link href=/tags/javascript-operator/><span class=menu__text>JS Operator</span></a></li><li class=menu__item><a class=menu__link href=/tags/javascript-console/><span class=menu__text>JS Console</span></a></li><li class=menu__item><a class=menu__link href=/tags/javascript-es6/><span class=menu__text>ES6</span></a></li></ul></li><li class="menu__item menu__dropdown"><a class=menu__link href=/spring-boot/><span class=menu__text>Spring Boot</span>
<label class=drop-icon for="Spring Boot">▾</label></a>
<input type=checkbox id="Spring Boot"><ul class=submenu__list><li class=menu__item><a class=menu__link href=/tags/spring-boot-basics/><span class=menu__text>Spring Boot Basics</span></a></li><li class=menu__item><a class=menu__link href=/tags/spring-boot-rest/><span class=menu__text>Spring Boot REST</span></a></li><li class=menu__item><a class=menu__link href=/tags/spring-boot-kafka/><span class=menu__text>Spring Boot KAFKA</span></a></li></ul></li><li class="menu__item menu__dropdown"><a class=menu__link href=/puzzle/><span class=menu__text>Puzzles</span>
<label class=drop-icon for=Puzzles>▾</label></a>
<input type=checkbox id=Puzzles><ul class=submenu__list><li class=menu__item><a class=menu__link href=/tags/maths-puzzle/><span class=menu__text>Maths Puzzles</span></a></li><li class=menu__item><a class=menu__link href=/tags/weight-puzzle/><span class=menu__text>Weight Puzzles</span></a></li></ul></li><li class="menu__item menu__dropdown"><a class=menu__link href=/interview-questions/><span class=menu__text>Interview Q&A</span>
<label class=drop-icon for="Interview Q&A">▾</label></a>
<input type=checkbox id="Interview Q&A"><ul class=submenu__list><li class=menu__item><a class=menu__link href=/tags/java-qa/><span class=menu__text>Java</span></a></li><li class=menu__item><a class=menu__link href=/tags/javascript-qa/><span class=menu__text>JavaScript</span></a></li><li class=menu__item><a class=menu__link href=/tags/css-qa/><span class=menu__text>CSS</span></a></li><li class=menu__item><a class=menu__link href=/tags/spring-qa/><span class=menu__text>Spring</span></a></li><li class=menu__item><a class=menu__link href=/tags/microservice-qa/><span class=menu__text>Microservices</span></a></li></ul></li><li class=menu__item><a class=menu__link href=/hugo/><span class=menu__text>Hugo</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About Me</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post autonumbering><header class=post__header><h1 class=post__title><img class=post__thumbnail src=/img/logo/interview.jpg alt="System Design Cheat Sheet"> System Design Cheat Sheet</h1><div class="post__meta meta"><div class="meta__item-author meta__item"><svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2.0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class=meta__text>Ashish Lahoti</span></div><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-10-05T00:00:00Z>October 05, 2020</time>
<time class=meta__text datetime=2020-11-08T00:00:00Z>(Last Modified: November 08, 2020)</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/interview-questions/ rel=category>Interview Questions</a></span></div></div></header><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#primary-database>Primary Database</a><ul><li><a href=#which-database-to-choose>Which database to choose?</a></li><li><a href=#scalability>Scalability</a></li><li><a href=#availability>Availability</a></li></ul></li><li><a href=#geo-sharding>Geo Sharding</a><ul><li></li></ul></li><li><a href=#consistent-hashing>Consistent Hashing</a></li><li><a href=#file-storage-options-imagevideo>File Storage Options (Image/Video)</a><ul><li><a href=#scalability-1>Scalability</a></li><li><a href=#availability-1>Availability</a></li></ul></li><li><a href=#caching>Caching</a></li><li><a href=#text-search-capabilities>Text Search Capabilities</a></li><li><a href=#reporting-and-analytics>Reporting and Analytics</a></li><li><a href=#top-hashing-algorithms>Top Hashing Algorithms</a><ul><li><a href=#consistent-hashing-1>Consistent Hashing</a></li><li><a href=#bloom-filter>Bloom Filter</a></li><li><a href=#count-min-sketch>Count-Min Sketch</a></li></ul></li></ul></nav></div></div><div class="content post__content clearfix"><p>This System Design Cheat Sheet gives you a quick idea to tackle with the building blocks of any system design interview questions. Keep following this post for regular updates.</p><h2 id=primary-database>Primary Database</h2><p>Primary database is your single source of truth when you save data. You always rely on this data.</p><h3 id=which-database-to-choose>Which database to choose?</h3><p>We always get confused with the database to use as our primary database. Here are some points to keep in mind to make a better decision.</p><h4 id=sql-database>SQL Database</h4><ul><li>Relational, Table-based</li><li>When you require <strong>ACID</strong> (Atomicity, Consistency, Isolation, and Durability) properties.</li><li>You choose SQL Database for saving financial transactions which gives you ACID guarantee that multiple records belongs to the same transaction are saved either all or nothing.</li><li>You choose SQL Database when rigid schema is required. For e.g. you want to maintain strict relationships between the tables. you want to maintain unique, not_null constraints.</li><li>You choose SQL Database when records are updated very frequently.</li><li>You choose SQL Database when Joins and complex queries are required.</li><li>SQL Databases are: Oracle, MySQL, MariaDB, Microsoft SQL Server, and PostgreSQL</li></ul><h4 id=nosql-database>NoSQL Database</h4><ul><li>Document-based, key-value pairs, Graph database</li><li>You choose NoSQL Database when flexible schema is required.<br>For e.g. e-commerce like Amazon can have Products in varied schema. Electronic products can have capacity (lt), power-rating (3-star) whereas Clothing products can have size (S,M,L,XL), material (cotton).</li><li>You choose NoSQL when horizontal scaling is required. They scale very well.</li><li>NoSQL Databases are: MongoDB, BigTable, Redis, RavenDb, Neo4j, and CouchDb</li></ul><p><em><strong>If you need any of the ACID property then use SQL Database else use NoSQL Database.</strong></em><br><br></p><h3 id=scalability>Scalability</h3><p>As your company grow, data grow and scalability comes into picture:-</p><h4 id=vertical-scaling>Vertical Scaling</h4><ol><li>Database can be scaled vertically by adding more power (CPU, RAM or SSD) to same machine, so that database can handle more load.</li><li>Vertical scaling has limitations as can not add power to same machine beyond a point.</li><li>SQL Databases are often scaled vertically</li></ol><h4 id=horizontal-scaling>Horizontal Scaling</h4><ol><li><p>Databases can be scaled horizontally by adding more machines into the pool of databases. Data is saved in pool of databases using <strong>Database Sharding</strong> or also known as <strong>Horizontal Partitioning</strong></p></li><li><p>Database sharding is easier in NoSQL databases as compare to SQL databases.</p><p>Database sharding means partitioning of data in multiple databases. Incoming data can be saved in databases based on some key. for e.g. userId in case of saving user profile.</p><pre><code>total database in horizontal partitioning = 5 [DB_1, DB_2, DB_3, DB_4, DB_5]
consistent hashing = 5 databases makes a consistent hash ring

        DB_1
    ➚         ↘
  DB_5        DB_2
    ↖         ↙
    DB_4 ⟵ DB_3


write user_1
hash(userId_1) = 1002
database to write this record = 1002%5 = 2 (DB_2)

write user_2
hash(userId_2) = 5119
database to write this record = 5119%5 = 4 (DB_4)

read user_1
hash(userId_1) = 1002
database to read this record = 1002%5 = 2 (DB_2)

DB_4 goes down....

write user_3
hash(userId_3) = 1234
database to write this record = 1234%5 = 4 (DB_4)
DB_4 is not available, write to the next available db in consistent hash ring i.e. DB_5
</code></pre></li></ol><br><h3 id=availability>Availability</h3><p>Availability is measured based on replication factor. Replication factor = 3 means a database is having 2 additional copies which keep themselves in-sync asynchronously.<br><br></p><h4 id=active-active>Active-Active</h4><p>Data read and write happen in any database replica.</p><p><em>(Eventual read and write <strong>C</strong>onsistency, High <strong>A</strong>vailability, High <strong>P</strong>erformance)</em></p><pre><code>        ┌―――――――――――┐
write ➔ |   DB_1    | ← read
        └―――――――――――┘
              ⇡⇣
        ┌―――――――――――┐
write ➔ |   DB_2    | ← read
        └―――――――――――┘

Eventual Read Consistency:-  
1. record_A write request to DB_1  
2. record_A read request from DB_2 immediately  
record_A is not be available in DB_2 if sync is yet to happen

Eventual Write Consistency:-
1. record_A write request to DB_1
2. record_A update request to DB_2 immediately
record_A is not be available in DB_2 if sync is yet to happen
</code></pre><p>Active-Active is not generally used because eventual write consistency is not acceptable in most of the non-functional requirement.<br><br></p><h4 id=active-passive-master-slave>Active-Passive (Master-Slave)</h4><p>Data read and write happen only in master database. Data is synced with slave database asynchronously. When Master goes down, Slave started serving as master.</p><p><em>(High read and write <strong>C</strong>onsistency, High <strong>A</strong>vailability, Low <strong>P</strong>erformance)</em></p><pre><code>        ┌―――――――――――――――――――┐
write ➔ |   DB_1 (master)   | ← read
        └―――――――――――――――――――┘
                 ⇣
        ┌―――――――――――――――――――┐
        |   DB_1&quot; (slave)   | 
        └―――――――――――――――――――┘
</code></pre><p>Active-Passive is generally used in financial sector where read and write consistency of financial transactions is very important.<br><br></p><h4 id=write-read-master-slave>Write-Read (Master Slave)</h4><p>Data write happen in master database. Data read happen from any database.</p><p><em>(High write and eventual read <strong>C</strong>onsistency, High <strong>A</strong>vailability, Low write and High read <strong>P</strong>erformance)</em></p><pre><code>        ┌―――――――――――――――――――┐
write ➔ |   DB_1 (master)   | ← read
        └―――――――――――――――――――┘
                 ⇣
        ┌―――――――――――――――――――┐
        |   DB_1&quot; (slave)   | ← read
        └―――――――――――――――――――┘
</code></pre><p>Write-Read is generally used in social media such as Facebook, LinkedIn, Twitter, Instagram where read/write ratio is very high and eventual read consistency is acceptable.<br><br></p><h4 id=cluster><strong>Cluster</strong></h4><p>When data is partitioned across multiple database</p><pre><code>total database in cluster = 5 [DB_1, DB_2, DB_3, DB_4, DB_5]
replication factor = 3
consistent hashing = 5 databases makes a consistent hash ring

        DB_1
    ➚         ↘
  DB_5        DB_2
    ↖         ↙
    DB_4 ⟵ DB_3

Data write for DB_1 is copied to DB_2 and DB_3 (next 2 databases in the ring)
Data write for DB_2 is copied to DB_3 and DB_4 (next 2 databases in the ring)
...
...
Data write for DB_5 is copied to DB_1 and DB_2 (next 2 databases in the ring)
</code></pre><p>In consistent hash ring, next two databases either can contain 100% data copy of previous database or share the 50%-50% data copy depending upon the requirement.</p><h2 id=geo-sharding>Geo Sharding</h2><p>Geo sharding is nothing but database sharding based on geo location.</p><h5 id=use-case>Use-case</h5><ol><li>It is used by ride hailing apps such as Uber, Grab to store live locations of drivers and passengers.</li><li>It is also used by tinder and other dating sites to provide recommendations based on location.</li></ol><h5 id=how-to-do>How to do?</h5><ol><li><a href=https://s2geometry.io/>Google S2 library</a> divides the geo locations into cells (for e.g. 1 cell = 100x100 miles square).</li><li>You get the live location (coordinates lat, long) of user and pass to S2 library, which returns the cell_id in which that location falls into.</li><li>Use this cell_id as a key to partition the data.</li></ol><h2 id=consistent-hashing>Consistent Hashing</h2><p>Consistent hashing is the algorithm used by:</p><ol><li>Most of the load balancers to distribute the load across multiple services.</li><li>Most of the database horizontal partitioning to distribute the data across multiple databases.</li></ol><p>The idea of consistent hashing is to place all the services (or databases) across the consistent hash ring and distribute the load based on some hashing algorithm. This gives us the flexibility to remove or add the service (or database) to the ring without disturbing the whole cluster with minimum or no data loss.</p><pre><code>total database in cluster = 5 [DB_1, DB_2, DB_3, DB_4, DB_5]
consistent hashing = 5 databases makes a consistent hash ring

        DB_1
    ➚         ↘
  DB_5        DB_2
    ↖         ↙
    DB_4 ⟵ DB_3
</code></pre><ul><li>If DB_2 goes down, Next database in the ring i.e. DB_3 is going to take additional load (future writes). If replication is not implemented then existing data of DB_2 will be lost but other database will still work.</li><li>If DB_6 is added newly between DB_5 and DB_1 then it share the 50% load of the next database in the ring i.e. DB_1.</li></ul><h2 id=file-storage-options-imagevideo>File Storage Options (Image/Video)</h2><h3 id=scalability-1>Scalability</h3><p>E-Commerce like Amazon, Social Media like Instagram, Facebook, Twitter, Streaming Provider like Netflix requires to store a huge amount of Images and Videos.</p><p>Images and Videos are stored a BLOB (Binary Large Object) and Database Storage is not a good option for this kind of storage. Why?</p><ol><li>You are not going to query on BLOB Storage</li><li>You do not need any ACID guarantees for BLOB storage as such provided by RDBMS</li><li>Costly to store in Database</li></ol><p>Cheaper and scalable options to store such files are <strong>Distributed File Systems (DFS)</strong> such as Sharepoint, Amazon S3.</p><p>Details about the image/video such as its DFS URL, metadata can be save in Database, referred by Image ID.</p><table><thead><tr><th style=text-align:left>ID</th><th style=text-align:left>URL</th><th style=text-align:left>METADATA</th><th style=text-align:left>IMAGE_THUMBNAIL/VIDEO_COVER_PHOTO</th></tr></thead></table><p>It is also a smart idea to save thumbnail of image, or cover photo of the video in database, size of which should not exceed few KBs. Initially the thumbnail or cover photo can be sent to the client along with the URL of image/video. It is a good experience for the user to see something while image/video is downloading/streaming from DFS.</p><h3 id=availability-1>Availability</h3><p>You may want to use <strong>Content Delivery Network (CDN)</strong> which distribute the same images/videos to different locations geographically near to the client locations.</p><h2 id=caching>Caching</h2><p>You need to use Caching at some point of time in your system design for faster read.</p><p>Few famous Caching solutions are:</p><ol><li>Redis (recommended)</li><li>Memcached</li><li>Hazelcast</li></ol><h2 id=text-search-capabilities>Text Search Capabilities</h2><p>Almost all the websites requires searching capabilities in one way or another. For e.g. Amazon for product search, Netflix for movies search, Youtube for video search, Social media websites for user profile search, and so and so forth.</p><p>Some of the popular text search engine:</p><ol><li>Elastic Search (recommended)</li><li>Apache Solr</li><li>Apache Lucene</li></ol><ul><li>Apache Lucene is the core framework written based on Map-Reduce and Inverted-Index algorithm.</li><li>Elastic Search and Apache Solr has been written on top of Apache Lucene provide additional search capabilities such as fuzzy search, type ahead, search suggestions.</li><li>You don&rsquo;t rely on these for storage. You generally save data in your primary database and write to Elastic Search or Apache Solr asynchronously.</li></ul><h2 id=reporting-and-analytics>Reporting and Analytics</h2><p>Data warehouse where you generally dump a lot of data and they provide very complex querying capabilities.</p><ol><li>Apache Hadoop</li><li>Amazon Redshift</li><li>Elastic Search</li></ol><h2 id=top-hashing-algorithms>Top Hashing Algorithms</h2><h3 id=consistent-hashing-1>Consistent Hashing</h3><p>Consistent Hashing is used to route the request to distributed resources. For e.g.</p><ul><li>Load Balancer use Consistent Hashing algorithm to route the request to specific Application Server.</li><li>Used in database sharding (also known as horizontal partitioning) to save the date in specific shard.</li></ul><br><h3 id=bloom-filter>Bloom Filter</h3><p>Bloom filter takes the constant time and space to answer Yes/No to this kind of questions:-</p><ol><li>Does this username exist or already taken?</li><li>Is this item exist in the set?</li></ol><p>Bloom filter gives:-</p><ol><li>100% accurate result when it says &ldquo;No&rdquo;</li><li>Probabilistic result when it says &ldquo;Yes&rdquo;. Sometimes it might be false positive.</li></ol><p>Bloom filter data-structure is represented as an array of bits like this:-</p><pre><code>Index         0   1   2   3   4   5   6   7
8 Bit Array | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
</code></pre><h6 id=case-1>Case 1</h6><p>Check username &ldquo;John&rdquo; exist?</p><pre><code>hash1(John) = 100 =&gt; 100%8 = 4  
hash2(John) = 54  =&gt; 54%8  = 6
</code></pre><p>Since 4th and 6th bit of our array is not set, &ldquo;John&rdquo; doesn&rsquo;t exist for sure. Set the bits 4th and 6th bit now:-</p><pre><code>Index         0   1   2   3   4   5   6   7
8 Bit Array | 0 | 0 | 0 | 0 | 1 | 0 | 1 | 0 |
</code></pre><h6 id=case-2>Case 2</h6><p>Check username &ldquo;Bill&rdquo; exist?</p><pre><code>hash1(Bill) = 81 =&gt; 81%8 = 1   
hash2(Bill) = 31 =&gt; 31%8 = 7  
</code></pre><p>Since 1st and 7th bit of our array is not set, &ldquo;Bill&rdquo; doesn&rsquo;t exist for sure. Set the 1st and 7th bit now:-</p><pre><code>Index         0   1   2   3   4   5   6   7
8 Bit Array | 0 | 1 | 0 | 0 | 1 | 0 | 1 | 1 |
</code></pre><h6 id=case-3>Case 3</h6><p>Check username &ldquo;Garry&rdquo; exist?</p><pre><code>hash1(Garry) = 89 =&gt; 89%8 = 1   
hash2(Garry) = 90 =&gt; 90%8 = 2  
</code></pre><p>Since 1st bit is set but 2nd bit is not set, &ldquo;Garry&rdquo; doesn&rsquo;t exist for sure. Set the 2nd bit now:-</p><pre><code>Index         0   1   2   3   4   5   6   7
8 Bit Array | 0 | 1 | 1 | 0 | 1 | 0 | 1 | 1 |
</code></pre><h6 id=case-4>Case 4</h6><p>Check username &ldquo;Jack&rdquo; exist?</p><pre><code>hash1(Jack) = 89 =&gt; 89%8 = 1  
hash2(Jack) = 90 =&gt; 90%8 = 2  
</code></pre><p>Since both 1st and 2nd bit are set, &ldquo;Jack&rdquo; may or may not exist. Check the database.</p><h6 id=conclusion>Conclusion</h6><ol><li>Number of bits takes very less space and in practice numbers of bits in array can be huge providing more precise results. We have used only 8 bits in the example.</li><li>Bloom filter provide 100% accurate result if user doesn&rsquo;t exist.</li><li>Bloom filter provide estimated result if user exist. Estimated result is more precise if hash function is evenly distributed and more hash functions are used. We have used only 2 hash functions in the example.</li></ol><br><h3 id=count-min-sketch>Count-Min Sketch</h3><p>Count-Min Sketch is probabilistic data structure which takes a constant time and space to answer this kind of questions:-</p><ol><li>Count views of a particular YouTube video?</li><li>Find the top trending posts on Instagram?</li></ol></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/system-design/ rel=tag>System Design</a></li></ul></div></footer></article></main><section class=social-share><ul class=share-icons><li><a href="https://twitter.com/intent/tweet?hashtags=codingnconcepts&url=https%3a%2f%2fcodingnconcepts.com%2fsystem-design-cheat-sheet%2f&text=System%20Design%20Cheat%20Sheet" target=_blank rel=noopener aria-label="Share on Twitter" class="share-btn twitter"><svg class="widget-social__link-icon icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5.0-78.8 35.3-78.8 78.8.0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3C20 26 16.1 39.6 16.1 54c0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1.0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4.0-12.6-.4-18.8-1.1C34.9 299 76.3 312 120.8 312c144.9.0 224.1-120 224.1-224.1.0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg><p>Twitter</p></a></li><li><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fcodingnconcepts.com%2fsystem-design-cheat-sheet%2f" target=_blank rel=noopener aria-label="Share on Facebook" class="share-btn facebook"><svg class="widget-social__link-icon icon icon-facebook" width="24" height="24" viewBox="0 0 352 352"><path d="m0 32v288c0 17.5 14.5 32 32 32h288c17.5.0 32-14.5 32-32V32c0-17.5-14.5-32-32-32H32C14.5.0.0 14.5.0 32zm320 0v288h-83V212h41.5l6-48H237v-31c0-14 3.5-23.5 23.5-23.5h26V66c-4.4-.6-19.8-1.5-37.5-1.5-36.9.0-62 22.2-62 63.5v36h-42v48h42v108H32V32z"/></svg><p>Facebook</p></a></li><li><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcodingnconcepts.com%2fsystem-design-cheat-sheet%2f&source=https%3a%2f%2fcodingnconcepts.com%2fsystem-design-cheat-sheet%2f&title=System%20Design%20Cheat%20Sheet&summary=System%20Design%20Cheat%20Sheet" target=_blank rel=noopener aria-label="Share on LinkedIn" class="share-btn linkedin"><svg class="widget-social__link-icon icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352"><path d="M0 40v272c0 21.9 18.1 40 40 40h272c21.9.0 40-18.1 40-40V40c0-21.9-18.1-40-40-40H40C18.1.0.0 18.1.0 40zm312-8c4.6.0 8 3.4 8 8v272c0 4.6-3.4 8-8 8H40c-4.6.0-8-3.4-8-8V40c0-4.6 3.4-8 8-8H312zM59.5 87c0 15.2 12.3 27.5 27.5 27.5s27.5-12.3 27.5-27.5S102.2 59.5 87 59.5 59.5 71.8 59.5 87zM187 157h-1v-21h-45v152h47v-75c0-19.8 3.9-39 28.5-39 24.2.0 24.5 22.4 24.5 40v74h47v-83.5c0-40.9-8.7-72-56.5-72-23 0-38.2 12.6-44.5 24.5zM64 288h47.5V136H64V288z"/></svg><p>LinkedIn</p></a></li><li><a href="whatsapp://send?text=System%20Design%20Cheat%20Sheet%2c%20by%20Coding%20N%20Concepts%0aSystem%20Design%20Cheat%20Sheet%20for%20Interview%20Preparation%0a%0ahttps%3a%2f%2fcodingnconcepts.com%2fsystem-design-cheat-sheet%2f%0a" target=_blank class="share-btn whatsapp"><svg class="widget-social__link-icon icon icon-whatsapp" width="24" height="24" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3.0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7.0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1.0-5.2 4.2-9.4 9.4-9.4 2.5.0 4.9 1 6.7 2.8s2.8 4.2 2.8 6.7c-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2s0-.5.1-.6.3-.3.4-.5c.2-.1.3-.3.4-.5s0-.4.0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg><p>Email</p></a></li><li><a href="mailto:?subject=Coding%20N%20Concepts - System%20Design%20Cheat%20Sheet.&body=System%20Design%20Cheat%20Sheet%2c%20by%20Coding%20N%20Concepts%0aSystem%20Design%20Cheat%20Sheet%20for%20Interview%20Preparation%0a%0ahttps%3a%2f%2fcodingnconcepts.com%2fsystem-design-cheat-sheet%2f%0a" target=_blank class="share-btn email"><svg class="widget-social__link-icon icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16V16 0h-16H16 0zm347 16-139 92.5L69 32zM199 157.5l9 5.5 9-5.5L384 46v210H32V46z"/></svg><p>Email</p></a></li></ul></section><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="Ashish Lahoti avatar" src=/media/authors/ashishlahoti.png class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>About Ashish Lahoti</span></div><div class=authorbox__description>Ashish Lahoti is a senior application developer at DBS Bank having 10+ years of experience in full stack technologies | Confluent Certified Developer for Apache KAFKA | SCJP Certified</div></div><nav class="post-nav flex"><div class="post-nav__item post-nav__item--prev"><a class=post-nav__link href=/java-multithreading-interview-questions/ rel=prev><span class=post-nav__caption>«&#8201;Previous</span><p class=post-nav__post-title>Java Multithreading (Concurrency) Interview Questions</p></a></div><div class="post-nav__item post-nav__item--next"><a class=post-nav__link href=/relational-database-interview-questions/ rel=next><span class=post-nav__caption>Next&#8201;»</span><p class=post-nav__post-title>Relational Database Interview Questions</p></a></div></nav><section class=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//codingnconcepts.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 CodingNConcepts.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>